# =====================================================================
# Configuration file for Intel Xeon E5-2630 v3 (Haswell-EP)
#
# This configuration is based on the Nehalem architecture, with values
# adjusted for modern processors using public available information.
# Some values are estimated.
# =====================================================================

#include intel-arch

# =====================================================================
# 1. Processor
# Defines the processor model, branch predictor, and tlb model.
# =====================================================================
[general]
total_cores = 8

[perf_model/core]
logical_cpus = 1                    # SMT (Hyper-Threading) disabled for predictable performance
frequency = 2.4

[perf_model/core/interval_timer]
dispatch_width = 8
window_size = 192                   # Re-order Buffer (ROB) size for Haswell
num_outstanding_loadstores = 24     # Load/Store Buffers

[perf_model/branch_predictor]
mispredict_penalty = 10

[perf_model/tlb]
penalty = 30

[perf_model/itlb]
size = 128
associativity = 8

[perf_model/dtlb]
size = 64
associativity = 4

[perf_model/stlb]
size = 1024
associativity = 8

[power]
technology_node = 22          # 22 nm


# =====================================================================
# 2. Memory Hierarchy (Cache & DRAM)
# Defines all cache levels and the main memory configuration.
# =====================================================================
[perf_model/l1_icache]
cache_size = 32               # 32 KB
associativity = 8
data_access_time = 4
tags_access_time = 1

[perf_model/l1_dcache]
cache_size = 32               # 32 KB
associativity = 8
data_access_time = 4
tags_access_time = 1

[perf_model/l2_cache]
cache_size = 256              # 256 KB per core
associativity = 8
data_access_time = 9
tags_access_time = 3
writeback_time = 55

[perf_model/l3_cache]
cache_size = 20480            # 20 MB
associativity = 20
data_access_time = 33
tags_access_time = 12
shared_cores = 8

[perf_model/dram_directory]
total_entries = 2621440       # Scaled for 20 MB L3

[perf_model/dram]
num_controllers = -1             # Use distributed DRAM controllers
controllers_interleaving = 8     # Interleave across 8 controller slices
latency = 40                     # Raw latency for DDR4-1866
per_controller_bandwidth = 14.1  # In GB/s. Almost 25% of the theoretical limit of 59.6 GB/s.
chips_per_dimm = 8
dimms_per_controller = 4
burst_length = 8                 # Standard for DDR4


# =====================================================================
# 3. Interconnect Network
# Defines how cores and memory communicate.
# =====================================================================
[network/bus]
bandwidth = 32.0              # Bidirectional QuickPath Interconnect (QPI) bandwidth: (8.0 GT/s * 2 B/T) * 2
