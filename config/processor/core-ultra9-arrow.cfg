# =====================================================================
# Configuration file for Intel Core i5-14600K (Raptor Lake Refresh)
#
# This configuration is based on the Nehalem architecture, with values
# adjusted for modern processors using public available information.
# Some values are estimated.
# =====================================================================

#include intel-arch

# =====================================================================
# 1. Processor
# Defines the processor model, branch predictor, and tlb model.
# =====================================================================
[general]
total_cores = 14                    # 6 P-Cores and 8 E-Cores

[perf_model/core]
# Hyper-Threading (2 threads per core) is enabled on the 6 P-Cores
logical_cpus = 1                    # Default value for the 8 E-Cores
logical_cpus[] = 2,2,2,2,2,2        # Specific value for the 6 P-Cores
# P-Cores: 3.5 GHz, E-Cores: 2.6 GHz (Base Clocks)
frequency = 2.6
frequency[] = 3.5,3.5,3.5,3.5,3.5,3.5 #...

# Microarchitecture of P-Cores and E-Cores is identical to the i9-14900K,
# so the following parameters remain unchanged, with arrays sized for 6 P-Cores.
[perf_model/core/interval_timer]
dispatch_width = 5
dispatch_width[] = 6,6,6,6,6,6
# Re-order Buffer (ROB): 512 for Raptor Cove, 64 for Gracemont
window_size = 64
window_size[] = 512,512,512,512,512,512
# Load/Store Buffers
num_outstanding_loadstores = 20
num_outstanding_loadstores[] = 40,40,40,40,40,40

[perf_model/branch_predictor]
mispredict_penalty = 8
mispredict_penalty[] = 12,12,12,12,12,12

# TLB hierarchy is a feature of the core architecture, not core count.
[perf_model/tlb]
penalty = 35

[perf_model/itlb]
size = 256
associativity = 8

[perf_model/dtlb]
size = 96
associativity = 12

[perf_model/stlb]
size = 2048
associativity = 16

[power]
technology_node = 10          # "Intel 7" process node (10nm), same as i9


# =====================================================================
# 2. Memory Hierarchy (Cache & DRAM)
# Defines all cache levels and the main memory configuration.
# =====================================================================
# L1 and L2 cache sizes are per-core features and thus identical to the i9
[perf_model/l1_icache]
cache_size = 32               # 32 KB
associativity = 8
data_access_time = 4
tags_access_time = 1

[perf_model/l1_dcache]
cache_size = 48               # 48 KB
associativity = 12
data_access_time = 4
tags_access_time = 1

[perf_model/l2_cache]
cache_size = 2048             # 2 MB per P-Core
associativity = 16
data_access_time = 13
tags_access_time = 4
writeback_time = 60

[perf_model/l3_cache]
cache_size = 24576            # 24 MB total, shared across all cores
associativity = 12            # Estimated based on L3 design
data_access_time = 35
tags_access_time = 13
shared_cores = 6              # Following base file logic, maps to P-Cores

[perf_model/dram_directory]
total_entries = 3145728             # Scaled for 24 MB L3 (131072 entries/MB * 24 MB)

[perf_model/dram]
num_controllers = -1                # Use distributed DRAM controllers
controllers_interleaving = 14       # Interleave across 14 controller slices (matches total_cores)
latency = 40                        # Raw latency for DDR5, identical memory controller
per_controller_bandwidth = 5.60     # Total realistic bandwidth of 78.40 GB/s / 14 slices
chips_per_dimm = 8
dimms_per_controller = 4
burst_length = 16                   # Standard for DDR5


# =====================================================================
# 3. Interconnect Network
# Defines how cores and memory communicate.
# =====================================================================
[network/bus]
# Desktop part, no QPI/UPI. The on-chip ring bus handles interconnect.
bandwidth = 200                     # High value for on-chip Ring Interconnect, assumed same as i9